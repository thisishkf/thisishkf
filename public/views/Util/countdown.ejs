<div id="countdown_container">
	<% data.forEach(function(issue, i) { %>
		<div>
			<div id="flipClock_<%=i%>" class="row flipClock" data-ts="<%=issue.ts%>">
				<div style="display:block; width:100%;">
					<h3><%= issue.issue %> (<%= issue.ts %>)</h3>
				</div>
				<div class="row" style="width:100%;">
					<div class="panel panel-default col-lg-3 col-md-3 col-xs-3">
						<div class="panel-heading">Days</div>
						<div class="panel-body" id="time-day">--</div>
					</div>
					<div class="panel panel-default col-lg-3 col-md-3 col-xs-3">
						<div class="panel-heading">Hours</div>
						<div class="panel-body" id="time-hours">--</div>
					</div>
					<div class="panel panel-default col-lg-3 col-md-3 col-xs-3">
						<div class="panel-heading">Min</div>
						<div class="panel-body" id="time-mins">--</div>
					</div>
					<div class="panel panel-default col-lg-3 col-md-3 col-xs-3">
						<div class="panel-heading">Sec</div>
						<div class="panel-body" id="time-sec">--</div>
					</div>
				</div>
			</div>
		</div>
	<% }); %>
</div>

			<script type="text/javascript">
				$(document).ready(function () {
					var updateTs = function () {
						$('.flipClock').each(function () {
							let _this = $(this);
							let now = moment();
							let then = moment(_this.attr('data-ts'));
							let diff = moment.duration(then.diff(now));
							_this.find("#time-day").html(diff._data.months * 30 + diff._data.days);
							_this.find("#time-hours").html(diff._data.hours);
							_this.find("#time-mins").html(diff._data.minutes);
							_this.find("#time-sec").html(diff._data.seconds);
						});
					};

					setInterval(updateTs, 1000);
				});
			</script>